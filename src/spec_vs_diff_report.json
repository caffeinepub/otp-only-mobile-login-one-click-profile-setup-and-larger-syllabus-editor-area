{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-14T04:40:00.612Z",
  "summary": "Diff largely introduces a new red/blue brand token system and updates multiple pages/components to use brand-red/brand-blue. However, several places still rely on subject/route-based accent selection and at least one component generates Tailwind classes dynamically, which conflicts with the requirements to avoid subject/route-based accent variety and to keep Tailwind class names statically detectable.",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "Ensure accent styling is limited to a maximum of two brand colors and no UI elements rely on subject/route-based accent variety across pages/components.",
      "reason": "Multiple pages/components still choose accent color based on subject or route/page (e.g., getSubjectAccent(...) and per-nav-item page-based color selection), which continues route/subject-based accent variability rather than a consistent fixed accent usage across the site.",
      "evidence": [
        "frontend/src/pages/CoursesPage.tsx (uses getSubjectAccent(subject) and getSubjectAccent(course.subject))",
        "frontend/src/pages/MockTestsPage.tsx (uses getSubjectAccent(subject))",
        "frontend/src/pages/SyllabusPage.tsx (uses getSubjectAccent(syllabus.subject))",
        "frontend/src/components/Header.tsx (computes `color` based on `page` and uses red vs blue for active state)"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Refactor frontend/src/utils/accents.ts so it no longer rotates through many accent colors by route/subject/index; update callers to use the new fixed brand accents; avoid Tailwind-unsafe dynamic/interpolated class names.",
      "reason": "Call sites still use subject-based accent helpers (getSubjectAccent) and index-based color selection (getBrandByIndex) to vary accent by subject/index. Additionally, Footer builds Tailwind class names via string interpolation (bg-${color}, text-${color}), which violates the requirement to avoid dynamic Tailwind class generation.",
      "evidence": [
        "frontend/src/pages/CoursesPage.tsx (imports/uses getSubjectAccent)",
        "frontend/src/pages/MockTestsPage.tsx (imports/uses getSubjectAccent)",
        "frontend/src/pages/SyllabusPage.tsx (imports/uses getSubjectAccent)",
        "frontend/src/pages/ProgressPage.tsx (uses getBrandByIndex(index) for metrics; uses getMetricCardClasses/getChartColor which are index-based)",
        "frontend/src/components/Footer.tsx (className uses `bg-${color}` and `text-${color}` interpolation)",
        "frontend/src/utils/accents.ts (includes getBrandByIndex; includes legacy mapping and indicates subject-based accent logic continues in truncated portion)"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "SEO additions: Google Search Console verification meta tag and sitemap link; new sitemap.xml content.",
      "reason": "Not requested (non-goal: keep changes limited to theme/color usage; no new unrelated features).",
      "evidence": [
        "frontend/index.html (mentioned in frontend-file-summaries.txt as adding verification meta + sitemap link)",
        "frontend/public/sitemap.xml (mentioned in frontend-file-summaries.txt as added/updated)"
      ]
    },
    {
      "description": "Admin panel syllabus editor resizing/typography changes (\"enlarged syllabus editor\").",
      "reason": "Not requested; outside theming-only scope and explicitly not part of requested theme simplification work.",
      "evidence": [
        "frontend-file-summaries.txt (mentions frontend/src/pages/AdminPanel.tsx changes)"
      ]
    },
    {
      "description": "Non-theming logic/config changes in App-level behavior (e.g., query retry policies / error boundary behavior) beyond simple color usage adjustments.",
      "reason": "Constraint says keep changes limited to theme/color usage; do not change authentication logic or backend behavior. The diff shows broader App.tsx changes not obviously limited to theming.",
      "evidence": [
        "frontend/src/App.tsx (shows QueryClient defaultOptions retry behavior and ErrorBoundary implementation; file is truncated so full extent is unclear)"
      ]
    }
  ],
  "confidence": 0.74,
  "changed_files": [
    "frontend-file-summaries.txt",
    "frontend/src/App.tsx",
    "frontend/src/components/Footer.tsx",
    "frontend/src/components/Header.tsx",
    "frontend/src/index.css",
    "frontend/src/pages/CoursesPage.tsx",
    "frontend/src/pages/HomePage.tsx",
    "frontend/src/pages/MockTestsPage.tsx",
    "frontend/src/pages/PaymentFailure.tsx",
    "frontend/src/pages/PaymentSuccess.tsx",
    "frontend/src/pages/ProfilePage.tsx",
    "frontend/src/pages/ProgressPage.tsx",
    "frontend/src/pages/SyllabusPage.tsx",
    "frontend/src/utils/accents.ts",
    "frontend/tailwind.config.js",
    "project_state.json"
  ]
}